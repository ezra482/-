<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>åœ£ç»é˜…è¯» | Bible Light</title>
<style>
  :root {
    --bg: #f8fafc;
    --text: #1e293b;
    --accent: #2563eb;
  }
  body.dark {
    --bg: #0f172a;
    --text: #e2e8f0;
    --accent: #3b82f6;
  }
  body {
    margin: 0;
    font-family: "Segoe UI", "Noto Sans SC", sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
  header {
    background: var(--accent);
    color: white;
    padding: 14px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  main {
    flex: 1;
    padding: 20px;
    max-width: 900px;
    margin: 0 auto;
    line-height: 1.7;
  }
  .verse {
    margin-bottom: 10px;
    border-left: 4px solid var(--accent);
    padding-left: 10px;
  }
  .note-box {
    margin-top: 20px;
    background: rgba(0,0,0,0.05);
    border-radius: 8px;
    padding: 10px;
  }
  textarea {
    width: 100%;
    height: 100px;
    border-radius: 6px;
    border: 1px solid #94a3b8;
    padding: 8px;
  }
  button {
    background: var(--accent);
    color: white;
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    cursor: pointer;
    margin-right: 8px;
    transition: 0.3s;
  }
  button:hover {
    background: #1d4ed8;
  }
  footer {
    text-align: center;
    padding: 10px;
    font-size: 13px;
    color: #64748b;
  }
</style>
</head>
<body>
<header>
  <div>ğŸ“– åœ£ç»é˜…è¯»</div>
  <div>
    <button onclick="goSettings()">è®¾ç½®</button>
    <button onclick="readAloud()">æœ—è¯»</button>
  </div>
</header>

<main id="bibleContent">
  <h2>åˆ›ä¸–è®° ç¬¬ä¸€ç«  (Genesis 1)</h2>
  <div class="verse" id="v1">
    <b>1.</b> èµ·åˆç¥åˆ›é€ å¤©åœ°ã€‚<br>
    <small>In the beginning God created the heavens and the earth.</small>
  </div>
  <div class="verse" id="v2">
    <b>2.</b> åœ°æ˜¯ç©ºè™šæ··æ²Œï¼Œæ¸Šé¢é»‘æš—ï¼›ç¥çš„çµè¿è¡Œåœ¨æ°´é¢ä¸Šã€‚<br>
    <small>Now the earth was formless and empty, darkness was over the surface of the deep, and the Spirit of God was hovering over the waters.</small>
  </div>
  <div class="verse" id="v3">
    <b>3.</b> ç¥è¯´ï¼šâ€œè¦æœ‰å…‰â€ï¼Œå°±æœ‰äº†å…‰ã€‚<br>
    <small>And God said, â€œLet there be light,â€ and there was light.</small>
  </div>

  <div class="note-box">
    <label>ğŸ“” æˆ‘çš„ç¬”è®°ï¼š</label>
    <textarea id="note"></textarea><br>
    <button onclick="saveNote()">ä¿å­˜ç¬”è®°</button>
  </div>
</main>

<footer>Â© 2025 Bible Light | è‡ªåŠ¨ä¿å­˜è®¾ç½®ä¸ç¬”è®°</footer>

<script>
  // === ä»è®¾ç½®ä¸­åŠ è½½è¯­è¨€ã€ä¸»é¢˜ã€è¯­éŸ³ã€é€Ÿåº¦ ===
  const settings = JSON.parse(localStorage.getItem('settings') || '{}');
  if (settings.theme === 'dark') document.body.classList.add('dark');

  // === æ§åˆ¶è¯­è¨€æ˜¾ç¤º ===
  if (settings.language === 'zh') {
    document.querySelectorAll('small').forEach(e => e.style.display = 'none');
  } else if (settings.language === 'en') {
    document.querySelectorAll('b, br').forEach(e => e.nextSibling && (e.nextSibling.remove ? e.nextSibling.remove() : 0));
    document.querySelectorAll('b').forEach(e => e.nextSibling && (e.nextSibling.textContent = ''));
  }

  // === ç¬”è®°ä¿å­˜ ===
  const noteBox = document.getElementById('note');
  noteBox.value = localStorage.getItem('myNote') || '';
  function saveNote(){
    localStorage.setItem('myNote', noteBox.value);
    alert('ç¬”è®°å·²ä¿å­˜');
  }

  // === è·³è½¬è®¾ç½®é¡µ ===
  function goSettings(){
    window.location.href = 'settings.html';
  }

  // === æœ—è¯»åŠŸèƒ½ ===
  function readAloud(){
    const text = document.getElementById('bibleContent').innerText;
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = settings.speed ? parseFloat(settings.speed) : 1;
    utterance.lang = (settings.language === 'en') ? 'en-US' : 'zh-CN';

    // å¯é€‰å£°éŸ³
    const voices = window.speechSynthesis.getVoices();
    if (settings.voice === 'female')
      utterance.voice = voices.find(v => v.name.toLowerCase().includes('female')) || voices[0];
    if (settings.voice === 'male')
      utterance.voice = voices.find(v => v.name.toLowerCase().includes('male')) || voices[0];

    speechSynthesis.speak(utterance);
  }
</script>
</body>
</html>
